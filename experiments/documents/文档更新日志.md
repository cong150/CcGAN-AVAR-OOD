# 📝 文档更新日志 (2025-11-08)

## 🎯 **本次更新内容**

### **1. 修正参数配置**
- ✅ 添加 `--max_num_img_per_label 25` 到所有训练脚本
- ✅ 修正 `--min_n_per_vic` 从30改为50（与原配置一致）
- ✅ 添加 `RESUME_ITER` 参数支持断点续训

### **2. 澄清输出文件**
- ✅ 创建 `输出文件说明.md`
- ✅ 解释 `imgs_in_train/` vs `fake_data/` 的区别
- ✅ 说明训练时只有`imgs_in_train/`有数据

### **3. 统一实验命名**
- ✅ 将所有文档中的"Our Method"改为"Simple-Mix"
- ✅ 将所有文档中的"step4_ood_fewshot.sh"改为"step4_simple_mix.sh"
- ✅ 统一预期结果描述："有改善但不够"

### **4. 添加新功能说明**
- ✅ 恢复训练指南（修改RESUME_ITER）
- ✅ 多GPU配置说明（修改CUDA_VISIBLE_DEVICES）
- ✅ 训练日志说明（output_step*.txt的作用）

---

## 📁 **更新的文档清单**

### **核心文档（4个）**
1. ✅ `START_HERE.txt` - 更新实验名称、时间、文件结构
2. ✅ `README.md` - 更新输出结构、查看结果方法、常见问题
3. ✅ `实验指南.md` - 保持原内容（已经是正确的）
4. ✅ `使用说明.txt` - 更新所有脚本名称和预期结果

### **新增文档（1个）**
5. ✅ `输出文件说明.md` - 详细解释输出目录结构

### **训练脚本（5个）**
6. ✅ `step1_train_aux_regression.sh` - 添加max_num_img_per_label
7. ✅ `step3_baseline_id_only.sh` - 添加RESUME_ITER、修正参数
8. ✅ `step4_simple_mix.sh` - 添加RESUME_ITER、修正参数
9. ✅ `step5_oracle_full.sh` - 添加RESUME_ITER、修正参数
10. ⚠️ `step2_prepare_data.sh` - 无需修改

---

## 🔄 **关键更新对比**

### **参数修正**
| 参数 | 旧值 | 新值 | 说明 |
|------|------|------|------|
| `--max_num_img_per_label` | ❌ 缺失 | ✅ 25 | 限制每标签样本数 |
| `--min_n_per_vic` | 30 | ✅ 50 | 与原配置一致 |
| `RESUME_ITER` | 硬编码0 | ✅ 变量 | 支持恢复训练 |

### **命名统一**
| 旧名称 | 新名称 | 原因 |
|--------|--------|------|
| "Our Method" | ✅ "Simple-Mix" | 更准确的定位 |
| "step4_ood_fewshot.sh" | ✅ "step4_simple_mix.sh" | 与实验名称一致 |
| "ood_fewshot_50" | ✅ "simple_mix_50" | setting_name统一 |

### **输出目录说明**
| 目录 | 生成时机 | 用途 |
|------|---------|------|
| `imgs_in_train/` | ✅ 训练时 | 快速查看进度 |
| `fake_data/` | ⚠️ 评估时 | 计算评估指标 |
| `ckpt_niter_*.pth` | ✅ 训练时 | 保存模型 |

---

## ✅ **验证清单**

### **文档一致性**
- ✅ 所有文档使用"Simple-Mix"
- ✅ 所有文档使用"step4_simple_mix.sh"
- ✅ 预期结果统一："有改善但不够"
- ✅ 无恢复训练指南的错误引用

### **脚本完整性**
- ✅ 所有训练脚本有`--max_num_img_per_label 25`
- ✅ 所有训练脚本有`--min_n_per_vic 50`
- ✅ 所有训练脚本支持`RESUME_ITER`
- ✅ GPU配置与原项目一致（单GPU）

### **说明准确性**
- ✅ 解释了RC-49有450个标签（0.2度间隔）
- ✅ 解释了CcGAN与SNGAN的关系
- ✅ 解释了辅助回归模型的作用
- ✅ 解释了imgs_in_train vs fake_data

---

## 📖 **用户关心的问题解答**

### **Q1: 为什么有450个标签不是900？**
**A**: RC-49标签是浮点数，每0.2度一个，90÷0.2 = 450 ✅

### **Q2: 为什么只有imgs_in_train有数据？**
**A**: 
- `imgs_in_train/` - 训练时自动生成 ✅
- `fake_data/` - 需要运行评估才生成 ⚠️

### **Q3: 训练中断了怎么办？**
**A**: 修改脚本的`RESUME_ITER=20000`即可继续 ✅

### **Q4: 为什么用SNGAN不是其他？**
**A**: 
- CcGAN是训练方法，不是模型架构
- SNGAN是底层GAN架构
- 可以用SAGAN/BigGAN等替换 ✅

### **Q5: 原项目是多GPU吗？**
**A**: 
- 原配置也是单GPU（CUDA_VISIBLE_DEVICES=0）
- 评估网络自动用DataParallel
- 可以修改为多GPU ✅

---

## 🚀 **后续建议**

### **对用户**
1. ✅ 现在可以开始训练了
2. ✅ 训练时只看`imgs_in_train/`即可
3. ✅ 如果中断，修改`RESUME_ITER`继续
4. ✅ 有多GPU可以修改`CUDA_VISIBLE_DEVICES`

### **文档维护**
1. ✅ 所有文档已同步
2. ✅ 命名已统一
3. ✅ 参数已修正
4. ✅ 说明已完善

---

## 📊 **最终文件清单**

```
experiments/
├── 📖 文档（6个）
│   ├── START_HERE.txt          ← 入口
│   ├── README.md               ← 快速开始
│   ├── 实验指南.md              ← 详细原理
│   ├── 使用说明.txt            ← 操作手册
│   ├── 输出文件说明.md          ← 输出目录解释 ⭐ 新增
│   └── 实验总结.md              ← 整理总结
│
├── 🔧 训练脚本（5个）
│   ├── step1_train_aux_regression.sh  ✅ 已更新
│   ├── step2_prepare_data.sh          ✅ 无需修改
│   ├── step3_baseline_id_only.sh      ✅ 已更新
│   ├── step4_simple_mix.sh            ✅ 已更新
│   └── step5_oracle_full.sh           ✅ 已更新
│
└── 🛠️ 工具
    └── prepare_ood_data.py            ✅ 无需修改
```

---

## ✨ **更新完成！**

所有文档和脚本已更新并同步，现在可以愉快地开始实验了！🎉

**下一步**：
1. 修改`step1_train_aux_regression.sh`中的路径
2. 运行`bash step1_train_aux_regression.sh`
3. 按步骤依次执行

祝实验顺利！🚀

